{% extends 'core/base.html' %}
{% block title %}Timetable{% endblock %}
{% block extra_css %}
<style>
  .header {
    background-color: rgb(250, 212, 255);
    padding: 1rem;
    width: 100%;
    margin-bottom: 1rem;
    border-radius: 1rem;
  }

  .header-content {
    background-color: beige;
    color: rgb(30, 0, 68);
    border-radius: 1rem;
    border: 1px solid red;
    padding: 1rem;
    text-align: center;
  }

  .header-content h1 {
    font-size: 1.5rem;
    margin: 0.5rem 0;
  }
  .header-content h2 {
    font-size: 1.2rem;
    margin: 0.3rem 0;
  }
  .header-content h4 {
    font-size: 1rem;
    margin: 0.3rem 0;
  }
</style>
{% endblock %}

{% block content %}
<div class="header">
  <div class="header-content">
    <h1>FEDERAL UNIVERSITY OF TECHNOLOGY, OWERRI</h1>
    <h2>DEPARTMENT OF COMPUTER SCIENCE STUDENTS</h2>
    <h4>CIT 306 WEB DEVELOPMENT PROJECT, GROUP 14</h4>
  </div>
</div>

<!-- Print button -->
<button onclick="printSection('timetable-printable')" class="btn" style="font-size: 12px; margin: 1rem 0;">
  Print / Save Timetable as PDF
</button>

<!-- Printable Timetable Area -->
<div id="timetable-printable">
  <h2 style="text-align:center;">Timetable</h2>
  <table class="timetable" style="width:100%; border-collapse: collapse; margin-top: 1rem;">
    <thead>
      <tr>
        <th style="border:1px solid #333; padding:8px;">Course</th>
        <th style="border:1px solid #333; padding:8px;">Level</th>
        <th style="border:1px solid #333; padding:8px;">Semester</th>
        <th style="border:1px solid #333; padding:8px;">Day</th>
        <th style="border:1px solid #333; padding:8px;">Time</th>
        <th style="border:1px solid #333; padding:8px;">Venue</th>
      </tr>
    </thead>
    <tbody>
      {% for t in timetable %}
      <tr>
        <td style="border:1px solid #333; padding:8px;">{{ t.course_code }}</td>
        <td style="border:1px solid #333; padding:8px;">{{ t.level }}</td>
        <td style="border:1px solid #333; padding:8px;">{{ t.semester }}</td>
        <td style="border:1px solid #333; padding:8px;">{{ t.day }}</td>
        <td style="border:1px solid #333; padding:8px;">{{ t.start_time }} - {{ t.end_time }}</td>
        <td style="border:1px solid #333; padding:8px;">{{ t.venue }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="6" style="border:1px solid #333; padding:8px; text-align:center;">No timetable entries</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Print Script -->
<script>
function printSection(sectionId) {
  var content = document.getElementById(sectionId).innerHTML;
  var printWindow = window.open('', '', 'width=800,height=600');
  printWindow.document.write('<html><head><title>Print</title>');
  printWindow.document.write('<style>');
  printWindow.document.write('table {width:100%; border-collapse: collapse;}');
  printWindow.document.write('table, th, td {border:1px solid #333; padding:8px; text-align:left;}');
  printWindow.document.write('h2 {text-align:center;}');
  printWindow.document.write('</style>');
  printWindow.document.write('</head><body>');
  printWindow.document.write(content);
  printWindow.document.write('</body></html>');
  printWindow.document.close();
  printWindow.print();
}
</script>
{% endblock %}
